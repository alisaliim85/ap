{% extends 'base.html' %}

{% block content %}
<div class="max-w-4xl mx-auto">

    <div class="mb-8 flex items-center justify-between">
        <div>
            <h2 class="text-3xl font-black text-slate-800">{{ title }}</h2>
            <p class="text-slate-500 font-medium mt-1">يرجى التأكد من دقة البيانات المدخلة لمطابقة السجلات الطبية</p>
        </div>
        <a href="{% url 'members:member_list' %}"
            class="w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-400 hover:text-brand-600 transition-all shadow-sm">
            <i class="ph-bold ph-arrow-right"></i>
        </a>
    </div>

    <div class="bg-white rounded-2xl border border-slate-200 shadow-xl shadow-slate-200/50 overflow-hidden">
        <div class="p-8 border-b border-slate-100 bg-slate-50/50">
            <h3 class="font-black text-slate-800 flex items-center gap-2">
                <i class="ph-duotone ph-identification-card text-brand-600 text-2xl"></i>
                بيانات الملف الشخصي والتغطية
            </h3>
        </div>

        <div class="p-8">
            <form method="post" class="space-y-8">
                {% csrf_token %}

                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">

                    <div class="md:col-span-2">
                        <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">جهة
                            التبعية (الشركة)</label>
                        {{ form.client }}
                        {% if form.client.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                            form.client.errors.0 }}</p>{% endif %}
                    </div>

                    <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">الفئة
                                التأمينية</label>
                            {{ form.policy_class }}
                            {% if form.policy_class.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                                form.policy_class.errors.0 }}</p>{% endif %}
                        </div>
                        <div>
                            <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">الاسم
                                الكامل</label>
                            {{ form.full_name }}
                            {% if form.full_name.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                                form.full_name.errors.0 }}</p>{% endif %}
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:col-span-2">
                        <div>
                            <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">رقم
                                الهوية / الإقامة</label>
                            {{ form.national_id }}
                            {% if form.national_id.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                                form.national_id.errors.0 }}</p>{% endif %}
                        </div>
                        <div>
                            <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">رقم
                                البطاقة الطبية</label>
                            {{ form.medical_card_number }}
                            {% if form.medical_card_number.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                                form.medical_card_number.errors.0 }}</p>{% endif %}
                        </div>
                        <div class="md:col-span-2">
                            <label
                                class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">العنوان
                                الوطني</label>
                            {{ form.national_address }}
                            {% if form.national_address.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                                form.national_address.errors.0 }}</p>{% endif %}
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">تاريخ
                            الميلاد</label>
                        {{ form.birth_date }}
                        {% if form.birth_date.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                            form.birth_date.errors.0 }}</p>{% endif %}
                    </div>

                    <div>
                        <label
                            class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">الجنس</label>
                        {{ form.gender }}
                        {% if form.gender.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                            form.gender.errors.0 }}</p>{% endif %}
                    </div>

                    <div>
                        <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">صلة
                            القرابة</label>
                        {{ form.relation }}
                        {% if form.relation.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                            form.relation.errors.0 }}</p>{% endif %}
                    </div>

                    <div>
                        <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">الموظف
                            الكفيل (في حال التابعين)</label>
                        {{ form.sponsor }}
                        {% if form.sponsor.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                            form.sponsor.errors.0 }}</p>{% endif %}
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-xs font-black text-slate-400 uppercase tracking-widest mb-2">رقم
                            الجوال</label>
                        {{ form.phone_number }}
                        {% if form.phone_number.errors %}<p class="mt-1 text-xs text-red-500 font-bold">{{
                            form.phone_number.errors.0 }}</p>{% endif %}
                    </div>

                    <div
                        class="md:col-span-2 flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200">
                        {{ form.is_active }}
                        <div>
                            <label for="{{ form.is_active.id_for_label }}" class="block font-bold text-slate-800">حساب
                                نشط</label>
                            <p class="text-[10px] text-slate-400">العضو النشط يمكنه إصدار مطالبات واستخدام الشبكة
                                الطبية.</p>
                        </div>
                    </div>
                </div>

                <div class="pt-8 border-t border-slate-100 flex justify-end gap-3">
                    <a href="{% url 'members:member_list' %}"
                        class="px-8 py-3 bg-white border border-slate-300 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition-all">إلغاء</a>
                    <button type="submit"
                        class="px-10 py-3 bg-brand-600 text-white rounded-xl font-black shadow-lg shadow-brand-200 hover:bg-brand-700 hover:-translate-y-0.5 active:translate-y-0 transition-all flex items-center gap-2">
                        <i class="ph-bold ph-check"></i> حفظ بيانات العضو
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}